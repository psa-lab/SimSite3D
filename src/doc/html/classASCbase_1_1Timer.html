<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>simsite3d: ASCbase::Timer Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<b>ASCbase</b>::<a class="el" href="classASCbase_1_1Timer.html">Timer</a></div>
<h1>ASCbase::Timer Class Reference</h1><!-- doxytag: class="ASCbase::Timer" -->A Linux profile timer for sequential programs.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Timer_8H-source.html">Timer.H</a>&gt;</code>
<p>
<a href="classASCbase_1_1Timer-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#122d59508cd380085fc87dc1755d4179">Timer</a> (int interval_sec_in=10)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor, sets the timer interval.  <a href="#122d59508cd380085fc87dc1755d4179"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cd15e84294d41860cdd7a3094d3f44e3"></a><!-- doxytag: member="ASCbase::Timer::~Timer" ref="cd15e84294d41860cdd7a3094d3f44e3" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#cd15e84294d41860cdd7a3094d3f44e3">~Timer</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Do nothing destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#af02e2d4035c0e6c90223918e7b3c093">start</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts profile timer.  <a href="#af02e2d4035c0e6c90223918e7b3c093"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#7943ae280c460242a3bb4c896ad80223">get</a> (double *real, double *virt, double *prof)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the elapsed time in seconds.  <a href="#7943ae280c460242a3bb4c896ad80223"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f493887703b0b619373eed9601c2d517"></a><!-- doxytag: member="ASCbase::Timer::fail" ref="f493887703b0b619373eed9601c2d517" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#f493887703b0b619373eed9601c2d517">fail</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if an error had occured. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#e0aa8a339712737f79406a38a2aa3258">started</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#4201c600a36475ddfeefa6def6aa610c">get_local_time</a> (char *buf, size_t buf_len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the local time in a string format.  <a href="#4201c600a36475ddfeefa6def6aa610c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#914aeaeacb811e85d426ae2867c9bc30">sig_handler</a> (int signum, siginfo_t *siginfo, void *ucontext)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The sig handler used when the timer expires.  <a href="#914aeaeacb811e85d426ae2867c9bc30"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#2b55a2346ab31964a25cb65907e62e99">Timer</a> (const <a class="el" href="classASCbase_1_1Timer.html">Timer</a> &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Privatized copy constructor.  <a href="#2b55a2346ab31964a25cb65907e62e99"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9de292b90dfbc1e13c935e142d5925a0"></a><!-- doxytag: member="ASCbase::Timer::get_itimer" ref="9de292b90dfbc1e13c935e142d5925a0" args="(double *rv, int which, long elapsed_sec)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#9de292b90dfbc1e13c935e142d5925a0">get_itimer</a> (double *rv, int which, long elapsed_sec)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the elapsed time for "which" timer in seconds. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#e1235f2eabcca3f12ff7c61225bb7210">my_strftime</a> (char *s, size_t max, const char *fmt, const struct tm *tm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wrapper to eliminate buggy gcc warning about using "%c" in strftime.  <a href="#e1235f2eabcca3f12ff7c61225bb7210"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7609083d78f0745bb5bcbf0901e9bcc2"></a><!-- doxytag: member="ASCbase::Timer::A_fail" ref="7609083d78f0745bb5bcbf0901e9bcc2" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#7609083d78f0745bb5bcbf0901e9bcc2">A_fail</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">False implies no outstanding errors. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="213642a43dde180cf72016bd4d42a344"></a><!-- doxytag: member="ASCbase::Timer::A_started" ref="213642a43dde180cf72016bd4d42a344" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#213642a43dde180cf72016bd4d42a344">A_started</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True implies timers are running. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a9d182c83c64a1f2736ed6db96ff4d5b"></a><!-- doxytag: member="ASCbase::Timer::A_timer_interval_sec" ref="a9d182c83c64a1f2736ed6db96ff4d5b" args="" -->
static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#a9d182c83c64a1f2736ed6db96ff4d5b">A_timer_interval_sec</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of sec used to init a timer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6198dfbf30712f92ba60374bdc7fb446"></a><!-- doxytag: member="ASCbase::Timer::A_real_elapsed_sec" ref="6198dfbf30712f92ba60374bdc7fb446" args="" -->
static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#6198dfbf30712f92ba60374bdc7fb446">A_real_elapsed_sec</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">real elapsed time not including timer <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="641a06b85a83c8bfe6b5c868ef015160"></a><!-- doxytag: member="ASCbase::Timer::A_virt_elapsed_sec" ref="641a06b85a83c8bfe6b5c868ef015160" args="" -->
static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#641a06b85a83c8bfe6b5c868ef015160">A_virt_elapsed_sec</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">virtual elapsed time not including timer <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cd7832452dd43df2c4b55fad0d67f74c"></a><!-- doxytag: member="ASCbase::Timer::A_prof_elapsed_sec" ref="cd7832452dd43df2c4b55fad0d67f74c" args="" -->
static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classASCbase_1_1Timer.html#cd7832452dd43df2c4b55fad0d67f74c">A_prof_elapsed_sec</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">profile elapsed time not including timer <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A Linux profile timer for sequential programs. 
<p>
This class has been updated to use sigaction() in the place of signal(). 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="122d59508cd380085fc87dc1755d4179"></a><!-- doxytag: member="ASCbase::Timer::Timer" ref="122d59508cd380085fc87dc1755d4179" args="(int interval_sec_in=10)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Timer::Timer           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interval_sec_in</em> = <code>10</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor, sets the timer interval. 
<p>
Sets the timer interval and initial timer to timer_interval_in<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interval_sec_in</em>&nbsp;</td><td>Value for timer interval an initial timer </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="2b55a2346ab31964a25cb65907e62e99"></a><!-- doxytag: member="ASCbase::Timer::Timer" ref="2b55a2346ab31964a25cb65907e62e99" args="(const Timer &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ASCbase::Timer::Timer           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classASCbase_1_1Timer.html">Timer</a> &amp;&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Privatized copy constructor. 
<p>
There is no valid reason to copy a timer class 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="7943ae280c460242a3bb4c896ad80223"></a><!-- doxytag: member="ASCbase::Timer::get" ref="7943ae280c460242a3bb4c896ad80223" args="(double *real, double *virt, double *prof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Timer::get           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>real</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>virt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>prof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the elapsed time in seconds. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>real</em>&nbsp;</td><td>Ptr to loc to store the elapsed real time </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>virt</em>&nbsp;</td><td>Ptr to loc to store the elapsed virtual time </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prof</em>&nbsp;</td><td>Ptr to loc to store the elapsed profile time </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if !fail() and <a class="el" href="classASCbase_1_1Timer.html#e0aa8a339712737f79406a38a2aa3258">started()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="4201c600a36475ddfeefa6def6aa610c"></a><!-- doxytag: member="ASCbase::Timer::get_local_time" ref="4201c600a36475ddfeefa6def6aa610c" args="(char *buf, size_t buf_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Timer::get_local_time           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>buf_len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the local time in a string format. 
<p>
Does not necessarily belong in the <a class="el" href="classASCbase_1_1Timer.html">Timer</a> class, but currently this is as good a place as any.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A Cstring used in the call to strftime </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_len</em>&nbsp;</td><td>Length of the Cstring buf </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A string holding the broken down format of the local time. </dd></dl>

</div>
</div><p>
<a class="anchor" name="e1235f2eabcca3f12ff7c61225bb7210"></a><!-- doxytag: member="ASCbase::Timer::my_strftime" ref="e1235f2eabcca3f12ff7c61225bb7210" args="(char *s, size_t max, const char *fmt, const struct tm *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t ASCbase::Timer::my_strftime           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct tm *&nbsp;</td>
          <td class="paramname"> <em>tm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wrapper to eliminate buggy gcc warning about using "%c" in strftime. 
<p>
From the man page for strftime: Some buggy versions of gcc complain about the use of c: warning: `c' yields only last 2 digits of year in some locales. Of course programmers are encouraged to use c, it gives the preferred date and time representation. One meets all kinds of strange obfuscations to circumvent this gcc problem. A relatively clean one is to add this intermediate function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Character array of size max </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>Size of the array s </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>Format string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>The tm structure to convert to a string. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of chars written to s if the time fits, else 0. </dd></dl>

</div>
</div><p>
<a class="anchor" name="914aeaeacb811e85d426ae2867c9bc30"></a><!-- doxytag: member="ASCbase::Timer::sig_handler" ref="914aeaeacb811e85d426ae2867c9bc30" args="(int signum, siginfo_t *siginfo, void *ucontext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Timer::sig_handler           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">siginfo_t *&nbsp;</td>
          <td class="paramname"> <em>siginfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>ucontext</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The sig handler used when the timer expires. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>signum</em>&nbsp;</td><td>The signal number passed to the sig handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>siginfo</em>&nbsp;</td><td>Pointer to a siginfo_t struct -- ignored by this function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ucontext</em>&nbsp;</td><td>Void pointer to a ucontext_t -- ignored by this function </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="af02e2d4035c0e6c90223918e7b3c093"></a><!-- doxytag: member="ASCbase::Timer::start" ref="af02e2d4035c0e6c90223918e7b3c093" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Timer::start           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Starts profile timer. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>True if timer was started, else false </dd></dl>

</div>
</div><p>
<a class="anchor" name="e0aa8a339712737f79406a38a2aa3258"></a><!-- doxytag: member="ASCbase::Timer::started" ref="e0aa8a339712737f79406a38a2aa3258" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ASCbase::Timer::started           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
True if timers have been started (i.e. <a class="el" href="classASCbase_1_1Timer.html#af02e2d4035c0e6c90223918e7b3c093">start()</a> has been called successfully) 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Timer_8H-source.html">Timer.H</a><li>Timer.C</ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Apr 3 23:09:21 2012 for simsite3d by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
